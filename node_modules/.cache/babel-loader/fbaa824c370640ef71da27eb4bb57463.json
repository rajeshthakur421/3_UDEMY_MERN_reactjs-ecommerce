{"ast":null,"code":"import _slicedToArray from \"/home/rudransh/public_html/react-mern-stack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/rudransh/public_html/react-mern-stack/src/admin/Orders.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Layout from \"../core/Layout\";\nimport { isAuthenticated } from \"../auth\";\nimport { Link } from \"react-router-dom\";\nimport { listOrders, getStatusValues, updateOrderStatus } from \"./apiAdmin\";\nimport moment from \"moment\";\n\nconst Orders = () => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        orders = _useState2[0],\n        setOrders = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        statusValues = _useState4[0],\n        setStatusValues = _useState4[1];\n\n  const _isAuthenticated = isAuthenticated(),\n        user = _isAuthenticated.user,\n        token = _isAuthenticated.token;\n\n  const loadOrders = () => {\n    listOrders(user._id, token).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setOrders(data);\n      }\n    });\n  };\n\n  const loadStatusValues = () => {\n    getStatusValues(user._id, token).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setStatusValues(data);\n      }\n    });\n  };\n\n  useEffect(() => {\n    loadOrders();\n    loadStatusValues();\n  }, []);\n\n  const showOrdersLength = () => {\n    if (orders.length > 0) {\n      return React.createElement(\"h1\", {\n        className: \"text-danger display-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, \"Total orders: \", orders.length);\n    } else {\n      return React.createElement(\"h1\", {\n        className: \"text-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, \"No orders\");\n    }\n  };\n\n  const showInput = (key, value) => React.createElement(\"div\", {\n    className: \"input-group mb-2 mr-sm-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"input-group-prepend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"input-group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, key)), React.createElement(\"input\", {\n    type: \"text\",\n    value: value,\n    className: \"form-control\",\n    readOnly: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }));\n\n  const handleStatusChange = (e, orderId) => {\n    updateOrderStatus(user._id, token, orderId, e.target.value).then(data => {\n      if (data.error) {\n        console.log(\"Status update failed\");\n      } else {\n        loadOrders();\n      }\n    });\n  };\n\n  const showStatus = o => React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"mark mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"Status: \", o.status), React.createElement(\"select\", {\n    className: \"form-control\",\n    onChange: e => handleStatusChange(e, o._id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"Update Status\"), statusValues.map((status, index) => React.createElement(\"option\", {\n    key: index,\n    value: status,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, status))));\n\n  return React.createElement(Layout, {\n    title: \"Orders\",\n    description: \"G'day \".concat(user.name, \", you can manage all the orders here\"),\n    className: \"container-fluid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-md-8 offset-md-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, showOrdersLength(), orders.map((o, oIndex) => {\n    return React.createElement(\"div\", {\n      className: \"mt-5\",\n      key: oIndex,\n      style: {\n        borderBottom: \"5px solid indigo\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"mb-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"bg-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"Order ID: \", o._id)), React.createElement(\"ul\", {\n      className: \"list-group mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"list-group-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, showStatus(o)), React.createElement(\"li\", {\n      className: \"list-group-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Transaction ID: \", o.transaction_id), React.createElement(\"li\", {\n      className: \"list-group-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Amount: $\", o.amount), React.createElement(\"li\", {\n      className: \"list-group-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"Ordered by: \", o.user.name), React.createElement(\"li\", {\n      className: \"list-group-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"Ordered on:\", \" \", moment(o.createdAt).fromNow()), React.createElement(\"li\", {\n      className: \"list-group-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Delivery address: \", o.address)), React.createElement(\"h3\", {\n      className: \"mt-4 mb-4 font-italic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"Total products in the order:\", \" \", o.products.length), o.products.map((p, pIndex) => React.createElement(\"div\", {\n      className: \"mb-4\",\n      key: pIndex,\n      style: {\n        padding: \"20px\",\n        border: \"1px solid indigo\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, showInput(\"Product name\", p.name), showInput(\"Product price\", p.price), showInput(\"Product total\", p.count), showInput(\"Product Id\", p._id))));\n  }))));\n};\n\nexport default Orders;","map":{"version":3,"sources":["/home/rudransh/public_html/react-mern-stack/src/admin/Orders.js"],"names":["React","useState","useEffect","Layout","isAuthenticated","Link","listOrders","getStatusValues","updateOrderStatus","moment","Orders","orders","setOrders","statusValues","setStatusValues","user","token","loadOrders","_id","then","data","error","console","log","loadStatusValues","showOrdersLength","length","showInput","key","value","handleStatusChange","e","orderId","target","showStatus","o","status","map","index","name","oIndex","borderBottom","transaction_id","amount","createdAt","fromNow","address","products","p","pIndex","padding","border","price","count"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Layout from \"../core/Layout\";\nimport { isAuthenticated } from \"../auth\";\nimport { Link } from \"react-router-dom\";\nimport { listOrders, getStatusValues, updateOrderStatus } from \"./apiAdmin\";\nimport moment from \"moment\";\n\nconst Orders = () => {\n    const [orders, setOrders] = useState([]);\n    const [statusValues, setStatusValues] = useState([]);\n\n    const { user, token } = isAuthenticated();\n\n    const loadOrders = () => {\n        listOrders(user._id, token).then(data => {\n            if (data.error) {\n                console.log(data.error);\n            } else {\n                setOrders(data);\n            }\n        });\n    };\n\n    const loadStatusValues = () => {\n        getStatusValues(user._id, token).then(data => {\n            if (data.error) {\n                console.log(data.error);\n            } else {\n                setStatusValues(data);\n            }\n        });\n    };\n\n    useEffect(() => {\n        loadOrders();\n        loadStatusValues();\n    }, []);\n\n    const showOrdersLength = () => {\n        if (orders.length > 0) {\n            return (\n                <h1 className=\"text-danger display-2\">\n                    Total orders: {orders.length}\n                </h1>\n            );\n        } else {\n            return <h1 className=\"text-danger\">No orders</h1>;\n        }\n    };\n\n    const showInput = (key, value) => (\n        <div className=\"input-group mb-2 mr-sm-2\">\n            <div className=\"input-group-prepend\">\n                <div className=\"input-group-text\">{key}</div>\n            </div>\n            <input\n                type=\"text\"\n                value={value}\n                className=\"form-control\"\n                readOnly\n            />\n        </div>\n    );\n\n    const handleStatusChange = (e, orderId) => {\n        updateOrderStatus(user._id, token, orderId, e.target.value).then(\n            data => {\n                if (data.error) {\n                    console.log(\"Status update failed\");\n                } else {\n                    loadOrders();\n                }\n            }\n        );\n    };\n\n    const showStatus = o => (\n        <div className=\"form-group\">\n            <h3 className=\"mark mb-4\">Status: {o.status}</h3>\n            <select\n                className=\"form-control\"\n                onChange={e => handleStatusChange(e, o._id)}\n            >\n                <option>Update Status</option>\n                {statusValues.map((status, index) => (\n                    <option key={index} value={status}>\n                        {status}\n                    </option>\n                ))}\n            </select>\n        </div>\n    );\n\n    return (\n        <Layout\n            title=\"Orders\"\n            description={`G'day ${\n                user.name\n            }, you can manage all the orders here`}\n            className=\"container-fluid\"\n        >\n            <div className=\"row\">\n                <div className=\"col-md-8 offset-md-2\">\n                    {showOrdersLength()}\n\n                    {orders.map((o, oIndex) => {\n                        return (\n                            <div\n                                className=\"mt-5\"\n                                key={oIndex}\n                                style={{ borderBottom: \"5px solid indigo\" }}\n                            >\n                                <h2 className=\"mb-5\">\n                                    <span className=\"bg-primary\">\n                                        Order ID: {o._id}\n                                    </span>\n                                </h2>\n\n                                <ul className=\"list-group mb-2\">\n                                    <li className=\"list-group-item\">\n                                        {showStatus(o)}\n                                    </li>\n                                    <li className=\"list-group-item\">\n                                        Transaction ID: {o.transaction_id}\n                                    </li>\n                                    <li className=\"list-group-item\">\n                                        Amount: ${o.amount}\n                                    </li>\n                                    <li className=\"list-group-item\">\n                                        Ordered by: {o.user.name}\n                                    </li>\n                                    <li className=\"list-group-item\">\n                                        Ordered on:{\" \"}\n                                        {moment(o.createdAt).fromNow()}\n                                    </li>\n                                    <li className=\"list-group-item\">\n                                        Delivery address: {o.address}\n                                    </li>\n                                </ul>\n\n                                <h3 className=\"mt-4 mb-4 font-italic\">\n                                    Total products in the order:{\" \"}\n                                    {o.products.length}\n                                </h3>\n\n                                {o.products.map((p, pIndex) => (\n                                    <div\n                                        className=\"mb-4\"\n                                        key={pIndex}\n                                        style={{\n                                            padding: \"20px\",\n                                            border: \"1px solid indigo\"\n                                        }}\n                                    >\n                                        {showInput(\"Product name\", p.name)}\n                                        {showInput(\"Product price\", p.price)}\n                                        {showInput(\"Product total\", p.count)}\n                                        {showInput(\"Product Id\", p._id)}\n                                    </div>\n                                ))}\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        </Layout>\n    );\n};\n\nexport default Orders;\n"]},"metadata":{},"sourceType":"module"}