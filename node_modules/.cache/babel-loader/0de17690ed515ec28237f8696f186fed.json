{"ast":null,"code":"import _objectSpread from \"/home/rudransh/public_html/MERN/react-node-ecommerce-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/rudransh/public_html/MERN/react-node-ecommerce-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/rudransh/public_html/MERN/react-node-ecommerce-front/src/admin/updateCategory.js\";\nimport React, { useState, useEffect } from 'react';\nimport Layout from '../core/Layout';\nimport { isAuthenticated } from '../auth';\nimport { Link, Redirect } from 'react-router-dom';\nimport { getCategory, updateCategory } from './apiAdmin'; // {category: [\"5cd0258f2793ec6e100bc191\"], price: []}\n// http://localhost:3000/admin/category/update/5cd0258f2793ec6e100bc191\n\nconst UpdateCategory = ({\n  match\n}) => {\n  const _useState = useState({\n    name: '',\n    error: '',\n    redirectToProfile: false,\n    formData: ''\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        values = _useState2[0],\n        setValues = _useState2[1]; // destructure user and token from localStorage\n\n\n  const _isAuthenticated = isAuthenticated(),\n        user = _isAuthenticated.user,\n        token = _isAuthenticated.token;\n\n  const name = values.name,\n        error = values.error,\n        redirectToProfile = values.redirectToProfile;\n\n  const init = categoryId => {\n    getCategory(categoryId, token).then(data => {\n      if (data.error) {\n        setValues(_objectSpread({}, values, {\n          error: data.error\n        }));\n      } else {\n        // populate the state\n        setValues(_objectSpread({}, values, {\n          name: data.name\n        }));\n      }\n    });\n  };\n\n  useEffect(() => {\n    init(match.params.categoryId);\n  }, []);\n\n  const handleChange = name => event => {\n    setValues(_objectSpread({}, values, {\n      error: false,\n      [name]: event.target.value\n    }));\n  };\n\n  const submitCategoryForm = e => {\n    e.preventDefault(); // update with ? you should send category name otherwise what to update?\n\n    const category = {\n      name: name\n    };\n    updateCategory(match.params.categoryId, user._id, token, category).then(data => {\n      if (data.error) {\n        setValues(_objectSpread({}, values, {\n          error: data.error\n        }));\n      } else {\n        setValues(_objectSpread({}, values, {\n          name: data.name,\n          error: false,\n          redirectToProfile: true\n        }));\n      }\n    });\n  };\n\n  const updateCategoryForm = () => React.createElement(\"div\", {\n    className: \"wrap-login100 p-l-85 p-r-85 p-t-55 p-b-55\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    className: \"mb-5\",\n    onSubmit: submitCategoryForm,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"login100-form-title p-b-32 m-b-7\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"Update Category Form\"), React.createElement(\"span\", {\n    className: \"txt1 p-b-11\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Category Name\"), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"wrap-input100 validate-input m-b-36\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    onChange: handleChange('name'),\n    value: name,\n    className: \"input100\",\n    type: \"text\",\n    required: true,\n    name: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"w-size25\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"flex-c-m size2 bg1 bo-rad-23 hov1 m-text3 trans-0-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Save Changes\"))));\n\n  const showError = () => React.createElement(\"div\", {\n    className: 'alert alert-danger',\n    role: \"alert\",\n    style: {\n      display: error ? '' : 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    className: \"close\",\n    \"data-dismiss\": \"alert\",\n    \"aria-label\": \"Close\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    \"aria-hidden\": \"true\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"\\xD7\")), error);\n\n  const redirectUser = () => {\n    if (redirectToProfile) {\n      if (!error) {\n        return React.createElement(Redirect, {\n          to: \"/admin/category\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        });\n      }\n    }\n  };\n\n  const goBackBTN = () => {\n    return React.createElement(\"div\", {\n      className: \"mt-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/admin/category\",\n      className: \"text-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"Back To Admin Home\"));\n  };\n\n  return React.createElement(Layout, {\n    title: \"Hi \".concat(user.name),\n    description: \"This is Update Product Action Page\",\n    className: \"container-fluid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-md-8 offset-md-2 m-b-250 mb-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, showError(), updateCategoryForm(), goBackBTN(), redirectUser())));\n};\n\nexport default UpdateCategory;","map":{"version":3,"sources":["/home/rudransh/public_html/MERN/react-node-ecommerce-front/src/admin/updateCategory.js"],"names":["React","useState","useEffect","Layout","isAuthenticated","Link","Redirect","getCategory","updateCategory","UpdateCategory","match","name","error","redirectToProfile","formData","values","setValues","user","token","init","categoryId","then","data","params","handleChange","event","target","value","submitCategoryForm","e","preventDefault","category","_id","updateCategoryForm","showError","display","redirectUser","goBackBTN"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Layout from '../core/Layout';\nimport { isAuthenticated } from '../auth';\nimport { Link, Redirect } from 'react-router-dom';\nimport { getCategory, updateCategory } from './apiAdmin';\n// {category: [\"5cd0258f2793ec6e100bc191\"], price: []}\n// http://localhost:3000/admin/category/update/5cd0258f2793ec6e100bc191\nconst UpdateCategory = ({ match }) => {\n    const [values, setValues] = useState({\n        name: '',\n        error: '',\n        redirectToProfile: false,\n        formData: ''\n    });\n\n    // destructure user and token from localStorage\n    const { user, token } = isAuthenticated();\n\n    const { name, error, redirectToProfile } = values;\n\n    const init = categoryId => {\n        getCategory(categoryId, token).then(data => {\n            if (data.error) {\n                setValues({ ...values, error: data.error });\n            } else {\n                // populate the state\n                setValues({\n                    ...values,\n                    name: data.name\n                });\n            }\n        });\n    };\n\n    useEffect(() => {\n        init(match.params.categoryId);\n    }, []);\n\n    const handleChange = name => event => {\n        setValues({ ...values, error: false, [name]: event.target.value });\n    };\n\n    const submitCategoryForm = e => {\n        e.preventDefault();\n        // update with ? you should send category name otherwise what to update?\n        const category = {\n            name: name\n        };\n        updateCategory(match.params.categoryId, user._id, token, category).then(data => {\n            if (data.error) {\n                setValues({ ...values, error: data.error });\n            } else {\n                setValues({\n                    ...values,\n                    name: data.name,\n                    error: false,\n                    redirectToProfile: true\n                });\n            }\n        });\n    };\n\n    const updateCategoryForm = () => (\n        <div className=\"wrap-login100 p-l-85 p-r-85 p-t-55 p-b-55\">\n            <form className=\"mb-5\" onSubmit={submitCategoryForm}>\n                <span className=\"login100-form-title p-b-32 m-b-7\">Update Category Form</span>\n                <span className=\"txt1 p-b-11\">Category Name</span>\n                <br />\n                <br />\n                <div className=\"wrap-input100 validate-input m-b-36\">\n                    <input\n                        onChange={handleChange('name')}\n                        value={name}\n                        className=\"input100\"\n                        type=\"text\"\n                        required\n                        name=\"name\"\n                    />\n                </div>\n                <div className=\"w-size25\">\n                    <button type=\"submit\" className=\"flex-c-m size2 bg1 bo-rad-23 hov1 m-text3 trans-0-4\">\n                        Save Changes\n                    </button>\n                </div>\n            </form>\n        </div>\n    );\n\n    const showError = () => (\n        <div className={'alert alert-danger'} role=\"alert\" style={{ display: error ? '' : 'none' }}>\n            <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                <span aria-hidden=\"true\">&times;</span>\n            </button>\n            {error}\n        </div>\n    );\n\n    const redirectUser = () => {\n        if (redirectToProfile) {\n            if (!error) {\n                return <Redirect to=\"/admin/category\" />;\n            }\n        }\n    };\n\n    const goBackBTN = () => {\n        return (\n            <div className=\"mt-5\">\n                <Link to=\"/admin/category\" className=\"text-info\">\n                    Back To Admin Home\n                </Link>\n            </div>\n        );\n    };\n\n    return (\n        <Layout\n            title={`Hi ${user.name}`}\n            description={`This is Update Product Action Page`}\n            className=\"container-fluid\"\n        >\n            <div className=\"row\">\n                <div className=\"col-md-8 offset-md-2 m-b-250 mb-5\">\n                    {showError()}\n                    {updateCategoryForm()}\n                    {goBackBTN()}\n                    {redirectUser()}\n                </div>\n            </div>\n        </Layout>\n    );\n};\n\nexport default UpdateCategory;\n"]},"metadata":{},"sourceType":"module"}